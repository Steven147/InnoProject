# 基于TABOR的项目搭建思路：

1. 数据集：gtsrb
2. 模型训练部分：20%被污染，直接指向33；80%原label。
   1. 对于方法的有效性可以从三个维度来看：以TL-8为基线控制变量，对两种图案分别分析，TL-4,TL-16,BR-8
      1. 图形：
         1. whiteSquare
         2. FF
      2. 位置：
         1. TL
         2. TR
         3. BL
         4. BR
      3. 大小：
         1. 8
         2. 4
         3. 2
         4. 16
3. 反向触发训练部分：
   1. 数据集：原未被污染的数据集的全部或部分数据
   2. 反向触发指向15；
   3. 以此为依据训练mask和pattern，所有原图叠加上该反向触发经过模型得到15，而被污染的图叠加上反向触发经过模型得到33.
4. 污染图像检测部分：
   1. 数据集：20%被污染，80%原label，保存污染图的编号
   2. 过程：反向触发叠加比较，若指向33则说明该图为污染图，保存其编号
   3. base-Line先比较反向触发得到的编号列表与原污染编号列表的正确率
      1. 定义指标：
         1. 正确率correct_rate=公共部分数量/真实被污染的数量
         2. 误报率false_correct_rate=1-公共部分数量/检测出被污染的数量
   4. 若正确率还可就可以进行剔除污染图重训练。

---

测试发现因为mask和pattern对原trigger的遮挡，导致叠加图结果不佳（是我预实验的锅orz

暂时想到的优化策略包括：

- 直接把得到的mask，pattern的四个角清零看是否还能得到反向触发训练的label y_target2.
  - 实验结果：
    - 对于whitesqure-TL-8，如果原模型有y_target1=12, y_target2=15，那么对于只叠加上反向触发的图，首先指向12，然后指向15。两个label的数量级差距大约在$10^{5}$。而对于两个都叠加上的图，两个label的数量级差距在$10^{16}$。
    - 对于FF-TL-8：如果原模型有y_target1=33, y_target2=15，那么对于只叠加上反向触发的图，只指向15。而对于两个都叠加上的图，只指向33.

- 反向触发训练的算法得改。
  - 可能的proposal：只训练中间1/4的面积。因为后门一般都在四个角，如果mask和pattern只在中间就不会遮挡后门，会呈现较好的效果
  - 对得到的mask和pattern分段、分析影响较大的位置

